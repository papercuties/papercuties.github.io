<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            transition: background-color 0.0s;
            color: #000;
            margin: 0;
            position: relative;
            overflow: hidden;
            font-size: 140%; /* Increased by 40% */
        }

        .dark-mode {
            background-color: #000;
            color: #fff;
        }

        .mode-toggle {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            cursor: pointer;
        }

        .mode-toggle.square {
            background-color: #000;
        }

        .dark-mode .mode-toggle.square {
            background-color: #fff;
        }

        .random-position {
            position: absolute;
            text-align: center;
            white-space: nowrap;
        }

        #draggableSquare {
            width: 290px;
            height: 290px;
            background-color: #f00; /* Bright red color for visibility */
            position: absolute;
            cursor: pointer;
            /* Removed border and box-shadow */
            border: none;
            box-shadow: none;
        }
    </style>
</head>
<body>

    <p class="random-position">papercuties</p>
    <p class="random-position"><a title="soundcloud" href="https://soundcloud.com/papercuties">soundcloud</a></p>
    <p class="random-position"><a title="instagram" href="https://instagram.com/serverknight">instagram</a></p>
    <p class="random-position"><a title="twitter" href="https://twitter.com/lilpapercuties">twitter</a></p>
    <p class="random-position"><a title="spotify" href="https://open.spotify.com/intl-it/artist/4cG8aNjgpnv8JmXBNnRdhW?si=_ZiJKLS-RySHc6AOuweRrw&amp;nd=1&amp;dlsi=8a3e90649d774772">spotify</a></p>
    <p class="random-position"><a title="tiktok" href="https://www.tiktok.com/@user7080000441612">tiktok</a></p>

    <div class="mode-toggle square random-position" onclick="toggleDarkMode()"></div>

    <!-- Draggable Square -->
    <div id="draggableSquare"></div>

    <script>
        function toggleDarkMode() {
            var body = document.body;
            body.classList.toggle('dark-mode');
            
            var selectedMode = body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('selectedMode', selectedMode);
        }

        document.addEventListener("DOMContentLoaded", function() {
            var selectedMode = localStorage.getItem('selectedMode');
            if (selectedMode === 'dark') {
                document.body.classList.add('dark-mode');
            }

            // Randomly position all elements, including the draggable square
            var elements = document.querySelectorAll('.random-position');
            elements.forEach(function(element) {
                setRandomPosition(element);
            });

            // Position the draggable square
            setRandomPosition(document.getElementById('draggableSquare'));
        });

        function setRandomPosition(element) {
            var scrollbarWidth = getScrollbarWidth();
            var buffer = 10; // 10-pixel buffer

            do {
                var left = Math.floor(Math.random() * (window.innerWidth - element.clientWidth - scrollbarWidth.vertical - buffer * 2)) + buffer;
                var top = Math.floor(Math.random() * (window.innerHeight - element.clientHeight - scrollbarWidth.horizontal - buffer * 2)) + buffer;

            } while (checkOverlap(left, top, element));

            element.style.left = left + 'px';
            element.style.top = top + 'px';
        }

        function getScrollbarWidth() {
            var scrollDiv = document.createElement('div');
            scrollDiv.style.width = '100px';
            scrollDiv.style.height = '100px';
            scrollDiv.style.overflow = 'scroll';
            scrollDiv.style.position = 'absolute';
            scrollDiv.style.top = '-9999px';
            document.body.appendChild(scrollDiv);
            
            var scrollbarWidth = {
                horizontal: scrollDiv.offsetHeight - scrollDiv.clientHeight,
                vertical: scrollDiv.offsetWidth - scrollDiv.clientWidth
            };

            document.body.removeChild(scrollDiv);

            return scrollbarWidth;
        }

        function checkOverlap(left, top, element) {
            var overlap = false;
            var rect1 = {
                left: left,
                top: top,
                right: left + element.offsetWidth,
                bottom: top + element.offsetHeight
            };

            elements.forEach(function(otherElement) {
                if (otherElement !== element) {
                    var rect2 = otherElement.getBoundingClientRect();
                    overlap = !(rect1.right < rect2.left || 
                                rect1.left > rect2.right || 
                                rect1.bottom < rect2.top || 
                                rect1.top > rect2.bottom);
                    if (overlap) return;
                }
            });
            return overlap;
        }

        var elements = document.querySelectorAll('.random-position');

        window.addEventListener('resize', function() {
            elements.forEach(function(element) {
                setRandomPosition(element);
            });

            // Re-position the draggable square
            setRandomPosition(document.getElementById('draggableSquare'));
        });

        // Draggable Square Script
        const draggableSquare = document.getElementById('draggableSquare');
        let isDragging = false;
        let startX, startY;
        let offsetX, offsetY;

        draggableSquare.addEventListener('mousedown', (e) => {
            // Calculate initial offsets relative to the square's position
            const rect = draggableSquare.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;
            startX = e.clientX;
            startY = e.clientY;
            isDragging = false;
            e.preventDefault(); // Prevent text selection while dragging
        });

        document.addEventListener('mousemove', (e) => {
            if (offsetX !== undefined && offsetY !== undefined) {
                // Update position only if dragging
                if (Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5) {
                    isDragging = true;
                    // Calculate new position
                    const newLeft = e.clientX - offsetX;
                    const newTop = e.clientY - offsetY;
                    
                    // Update square position
                    draggableSquare.style.left = `${newLeft}px`;
                    draggableSquare.style.top = `${newTop}px`;
                }
            }
        });

        document.addEventListener('mouseup', (e) => {
            // Only redirect if it was a click and not a drag
            if (!isDragging && e.clientX === startX && e.clientY === startY) {
                window.location.href = 'https://soundcloud.com/papercuties/soft';
            }
            // Reset states
            offsetX = undefined;
            offsetY = undefined;
            isDragging = false;
        });
    </script>

</body>
</html>
